---
title: "Keep your secrets under control - Cryptography for All"
output:
  word_document: default
  html_notebook: default
  html_document: default
---

This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook. When you execute code within the notebook, the results appear beneath the code. 

#### Disclamer

By joining this course or using material from the course you agree that all materials of the course are solely provided "as is" without any guarantee of functionality. All methods are provided for training purposes. Course developed by non security expert by explaining the practical use of **OpenSSL** software library in `R Statistical Software`. There is a risk that you can loose your information in case you are not properly follow the instructions or by loosing your private key or alike. Make sure you know what you do at any time when using the material of the course. Always test your knowledge on dummy data before applying it to real data... Memory areas for your private key, secrets, or passphrase are not securely cleaned after use. You are using the material of the course at your own risk!

#### Lecture 7 generate your public key with your private key

Hello and thank you for continuing this course. In the last lecture we have created our private key and stored it to the file. Let's now move closer to understand how to generate a public key using a private key.

This lecture will have three learning objectives:

* reading our private key from file
* generating our public key
* writing our public key to the file

At this stage we have our private key written in the file. Once it's in the file we can't really use it we must load it to some program. As you remember our program of choice will be our R Statistical SOftware.

Once again we will start R studio and load our library openssl. Now we can start reading the file. Let's doublecheck that our environment is now empty. I have here my usb key which I will connect to computer now. in my script I will write: private_key, assigment operator my function read underscore key and I will specify the path to the file. If I have specified password I must now provide it here:

```{r}
private_key <- read_key(file = "private.key", password = "udemy")
```

If I would not provide my password argument R Studio will ask me this password in the interactive mode

```{r}
#private_key <- read_key(file = "private.key")
```

Now check it out in the Environment our exact same key will be back!!!

```{r}
str(private_key)
```

We are ready to the second objective of our lecture which is to create public key. As a reminder public key is required to encrypt or lock our secret... because public key was part of a private key we can always just extract it from our private key. To do this we need to add dollar pubkey and assign the result to the object public underscore key

```{r}
# one possibility:
public_key <- private_key$pubkey
# alternative from documentation
public_key2 <- as.list(private_key)$pubkey
# result is the same...
```

let's check out what is in our key:

```{r}
str(public_key)
```



At this moment let's conclude our lecture with a quick summary:

* reading our private key
To read our private key from the file we use function read_key and we are reading our private key back. We can keep our private key in the file
* generating our public key
because public key is a part of the private key we can extract it as a part of the list.

For those more experienced users I will summarise entire executed code in the form of the simple code chunk:

```{r}
# read key
public_key <- read_key(file = "private.key", password = "udemy") %>% 
  # extract element of the list
  `[[`("pubkey")
```

very elegantly isn't it?

And with that we are perfectly ready to start creating secrets... right in the next lecture